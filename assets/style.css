/* assets/style.css */

/* === Variables & reset === */
:root {
  --bg: #1a0a00;
  --text: #ffeedd;
  --accent: #ff7700;
  --contrast-bg: #ffeedd;
  --contrast-text: #1a0a00;
}
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}
body {
  background: var(--bg);
  color: var(--text);
  font-family: 'Press Start 2P', monospace;
  overflow-x: hidden;
  min-height: 100vh;
}
.high-contrast {
  background: var(--contrast-bg)!important;
  color: var(--contrast-text)!important;
  filter: none!important;
}

/* === Dunes Canvas === */
#duneCanvas {
  position: fixed;
  top: 0; left: 0; z-index: -1;
}

/* === Header === */
header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 2rem;
  background: rgba(0,0,0,0.6);
  border-bottom: 3px solid var(--accent);
}
header .logo {
  display: flex; align-items: center;
}
header .logo img {
  height: 48px; margin-right: 10px;
  filter: drop-shadow(0 0 5px var(--accent));
}
header .logo h1 {
  font-size: 1.2rem; color: var(--accent);
}
nav a {
  margin-left: 1rem;
  color: var(--text);
  text-decoration: none;
  opacity: 0;
  transform: translateX(20px);
  animation: navFade 0.5s ease forwards;
}
nav a:nth-child(1){ animation-delay:0.1s }
nav a:nth-child(2){ animation-delay:0.2s }
nav a:nth-child(3){ animation-delay:0.3s }
nav a:nth-child(4){ animation-delay:0.4s }
nav a:nth-child(5){ animation-delay:0.5s }
nav a:hover, nav a.active { color: #fff }
nav a.active::after {
  content:''; position:absolute; bottom:-4px; left:0;
  width:100%; height:2px; background:var(--accent);
}

/* === Main & centering === */
main {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 2rem;
}

/* === Chart Container === */
#chartContainer {
  position: relative;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;   /* enfants en haut */
  align-items: center;
  overflow: hidden;               /* masque débordements */
  background: rgba(0,0,0,0.5);
  padding: 2rem 1rem 1rem;        /* plus d’espace en haut */
  border: 2px solid var(--accent);
  border-radius: 8px;
  animation: fadeIn 0.6s ease-out;
  width: 75vw;                    /* 75% de la largeur */
  max-width: 1200px;
  height: 80vh;                   /* 80% de la hauteur viewport */
  margin: auto;                   /* centre horizontalement */
}

/* mini-sparkline et main-chart */
#chartContainer canvas {
  width: 100% !important;
  margin: 1rem 0;
  z-index: 1;
}
/* Contrainte de hauteur du mainChart (évite le débordement) */
#chartContainer canvas#mainChart {
  /* calc(80vh - (hauteur mini-chart + paddings)) */
  max-height: calc(80vh - 100px) !important;
  height: auto !important;
}

/* === Loading Overlay === */
#loadingOverlay {
  position: absolute; top:0; left:0;
  width:100%; height:100%;
  background: rgba(0,0,0,0.7);
  display: flex; justify-content:center; align-items:center;
  z-index: 2;
}
.spinner {
  width:40px; height:40px;
  border:4px solid var(--text);
  border-top:4px solid var(--accent);
  border-radius:50%;
  animation: spin 1s linear infinite;
}

/* === Fullscreen Behavior & centering === */
#chartContainer:fullscreen,
#chartContainer:-webkit-full-screen {
  display: flex !important;
  flex-direction: column !important;
  justify-content: center !important;
  align-items: center !important;
  width:100vw !important;
  height:100vh !important;
}
#chartContainer:fullscreen canvas#mainChart,
#chartContainer:-webkit-full-screen canvas#mainChart {
  width:90vw !important;
  max-width:1200px !important;
  height:auto !important;
  max-height: none !important;  /* désactive la restriction en full-screen */
}

/* === Controls === */
.chart-controls {
  position: absolute;
  top:10px; left:50%;
  transform: translateX(-50%);
  display:flex; gap:0.5rem;
  z-index:3;
}
.chart-controls button {
  background:var(--accent);
  border:none; border-radius:4px;
  width:40px; height:40px;
  cursor:pointer; position:relative;
  transition: background .2s, color .2s;
}
.chart-controls button:hover {
  background:var(--text);
  color:var(--accent);
}
#fullscreenBtn::before {
  content:'⤢'; font-size:1.2rem;
  position:absolute; top:50%; left:50%;
  transform:translate(-50%,-50%);
}
#contrastBtn::before {
  content:'⚡'; font-size:1.2rem;
  position:absolute; top:50%; left:50%;
  transform:translate(-50%,-50%);
}

/* === Footer === */
footer {
  position:absolute; bottom:0; left:0;
  width:100%; padding:.5rem;
  text-align:center;
  background: rgba(0,0,0,0.6);
  font-size:.75rem; color:#777;
}

/* === Animations === */
@keyframes fadeIn    { from{opacity:0;transform:translateY(10px)} to{opacity:1;transform:translateY(0)} }
@keyframes fadeInDown{ from{opacity:0;transform:translateY(-20px)} to{opacity:1;transform:translateY(0)} }
@keyframes navFade   { to{opacity:1;transform:translateX(0)} }
@keyframes spin      { to{transform:rotate(360deg)} }
.fade-in-down{animation:fadeInDown .6s ease-out}
.fade-in-up  {animation:fadeIn .6s ease-out}
